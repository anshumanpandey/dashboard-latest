@model NHS.Common.clsSJROutcome
@{
    ViewBag.Title = "SJROutcome";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />
<br />

<div class="container">
    <div class="row form-group">
        <div class="col-lg-12">
            <div class="row" align="right">
                <div class="col-md-12">
                    <input type="image" src="~/images/Delete.png" width="30" height="30" alt="Submit" id="btnClose1" title="Close" />
                </div>
            </div>
        </div>
    </div>
   
    <div class="row setup-content" id="step-1">
        @using (Html.BeginForm("SJROutcome", "Home", FormMethod.Post, new { @id = "my_form" }))
        {
            <div class="col-xs-12 col-lg-12">
                <div class="row" align="right">

                </div>
                <div class="col-md-12 text-center">
                    <div class="form-section" style="text-align:left">
                        <div class="lable_title">
                            <h2>SJR OUTCOME</h2>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="row_bar">
                                    Stage 2 SJR Required?
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="row_bar checkbox-row">
                                    @if (Model.Stage2SJRRequired == true)
                                    {
                                        <input type="radio" id="Stage2SJRRequiredYes" checked name="Stage2SJRRequired" value="Yes"><span> Yes </span>
                                    }
                                    else
                                    {
                                        <input type="radio" id="Stage2SJRRequiredYes" name="Stage2SJRRequired" value="Yes"><span> Yes </span>
                                    }
                                    @if (Model.Stage2SJRRequired == false)
                                    {
                                        <input type="radio" id="Stage2SJRRequiredNo" checked name="Stage2SJRRequired" value="No"><span> No </span>
                                    }
                                    else
                                    {
                                        <input type="radio" id="Stage2SJRRequiredNo" name="Stage2SJRRequired" value="No"><span> No </span>
                                    }
                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 dstable3" style="padding-bottom: 10px !important;">
                                <table style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#a9d7cc;" width="100%">
                                    <tbody>
                                        <tr style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#a9d7cc">
                                            <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc; padding:5px 5px;" width="40%"><b>Patient ID</b></td>
                                            <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc; padding:5px 5px;">@Model.PatientId</td>
                                        </tr>
                                        <tr style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#a9d7cc">
                                            <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc; padding:5px 5px;"><b>Patient Name</b></td>
                                            <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc; padding:5px 5px;">@Model.PatientName</td>

                                        </tr>
                                        <tr style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc">
                                            <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc; padding:5px 5px;"><b>DOB</b></td>
                                            <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#a9d7cc; padding:5px 5px;">@Model.DOB</td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                            @*<div class="col-md-2">
            <div class="row_bar">
                &nbsp;
            </div>
        </div>*@
                         
                            @if (Model.Stage2SJRRequired == true)
                            {
                                <div id="stage2datelabel" class="col-md-4" style="display:block">
                                    <div class="row_bar">
                                        <span>Stage 2 SJR date sent</span>
                                    </div>
                                </div>
                                <div id="stage2date" class="col-md-8" style="display:block">
                                    <div class="row_bar">
                                        <input class="form-control datepicker" readonly="readonly" type="text" id="Stage2SJRDateSent" value="@Model.Stage2SJRDateSent" name="Stage2SJRDateSent" placeholder="Select Date">
                                    </div>
                                </div>
                                <div id="stage2sentlabel" class="col-md-4" style="display:block">
                                    <div class="row_bar">
                                        <span>Stage 2 SJR sent to</span>
                                    </div>
                                </div>

                                <div id="stage2sent" class="col-md-8" style="display:block">
                                    <div class="row_bar">
                                        @Html.EditorFor(model => model.Stage2SJRSentTo, new { htmlAttributes = new { @class = "form-control" } })
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div id="stage2datelabel" class="col-md-4" style="display:none">
                                    <div class="row_bar">
                                        <span>Stage 2 SJR date sent</span>
                                    </div>
                                </div>
                                <div id="stage2date" class="col-md-8" style="display:none">
                                    <div class="row_bar">
                                        <input class="form-control datepicker" readonly="readonly" type="text" id="Stage2SJRDateSent" value="@Model.Stage2SJRDateSent" name="Stage2SJRDateSent" placeholder="Select Date">
                                    </div>
                                </div>
                                <div id="stage2sentlabel" class="col-md-4" style="display:none">
                                    <div class="row_bar">
                                        <span>Stage 2 SJR sent to</span>
                                    </div>
                                </div>

                                <div id="stage2sent" class="col-md-8" style="display:none">
                                    <div class="row_bar">
                                        @Html.EditorFor(model => model.Stage2SJRSentTo, new { htmlAttributes = new { @class = "form-control" } })
                                    </div>
                                </div>
                            }
                            @*<div class="col-md-1">
            <div class="row_bar">
                &nbsp;
            </div>
        </div>*@

                            @*<div class="col-md-1">
            <div class="row_bar">
                &nbsp;
            </div>
        </div>*@
                        </div>
                        <br/>
                        <div class="lable_title">
                            <h2>SIRI/ RCA OUTCOME</h2>
                        </div><br />
                        <div class="row">
                            <div class="col-md-4">
                                <span>Reference Number</span>
                            </div>

                            <div class="col-md-8">
                                @Html.EditorFor(model => model.ReferenceNumber, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-4">
                                <span>Date Received</span>
                            </div>
                            <div class="col-md-8">
                                <input class="form-control datepicker" readonly="readonly" type="text" id="DateReceived" value="@Model.DateReceived" name="DateReceived" placeholder="Select Date">
                            </div>
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-12">
                                <span>Comments</span>
                            </div>
                            @*<div class="col-md-8">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-12">
                                @Html.TextAreaFor(model => model.SIRIComments, 5, 100, new { @class = "form-control" })
                            </div>
                        </div><br />
                        <div class="lable_title">
                            <h2>MORTALITY SURVEILLANCE GROUP </h2>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <span>Presentation to MSG required? </span>
                            </div>
                            <div class="col-md-8">
                                <div class="row_bar checkbox-row">
                                    @if (Model.MSGRequired == true)
                                    {
                                        <input type="radio" id="MSGRequired" checked name="MSGRequired" value="Yes"><span> Yes </span>
                                    }
                                    else
                                    {
                                        <input type="radio" id="MSGRequired" name="MSGRequired" value="Yes"><span> Yes </span>
                                    }
                                    @if (Model.MSGRequired == false)
                                    {
                                        <input type="radio" id="MSGRequired" checked name="MSGRequired" value="No"><span> No </span>
                                    }
                                    else
                                    {
                                        <input type="radio" id="MSGRequired" name="MSGRequired" value="No"><span> No </span>
                                    }
                                </div>
                            </div>
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            @if (Model.MSGRequired == true)
                            {
                            <div id="msglabel" class="col-md-4" style="display:block">
                                <span>Discussed with MSG</span>
                            </div>

                            <div id="msgdate" class="col-md-8" style="display:block">
                                <input class="form-control datepicker" readonly="readonly" type="text" id="MSGDiscussionDate" name="MSGDiscussionDate" value="@Model.MSGDiscussionDate" placeholder="Select Date" value="@Model.MSGDiscussionDate">
                            </div>
                            }
                            else
                            {
                                <div id="msglabel" class="col-md-4" style="display:none">
                                    <span>Discussed with MSG</span>
                                </div>

                                <div id="msgdate" class="col-md-8" style="display:none">
                                    <input class="form-control datepicker" readonly="readonly" type="text" id="MSGDiscussionDate" name="MSGDiscussionDate" value="@Model.MSGDiscussionDate" placeholder="Select Date" value="@Model.MSGDiscussionDate">
                                </div>
                            }
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-4">
                                <div class="row_bar">
                                    <span>Avoidability Score</span>
                                </div>
                            </div>
                            <br/>
                            <div class="col-md-8">
                                <div class="row_bar">
                                    <select class="form-control" id="AvoidabilityScoreID" name="AvoidabilityScoreID">
                                        <option value="-1">--Select--</option>
                                        @if (Model.AvoidabilityScoreID == 0)
                                        {
                                            <option selected value="0">0</option>
                                        }
                                        else
                                        {
                                            <option value="0">0</option>
                                        }
                                        @if (Model.AvoidabilityScoreID == 1)
                                        {
                                            <option selected value="1">1</option>
                                        }
                                        else
                                        {
                                            <option value="1">1</option>
                                        }
                                        @if (Model.AvoidabilityScoreID == 2)
                                        {
                                            <option selected value="2">2</option>
                                        }
                                        else
                                        {
                                            <option value="2">2</option>
                                        }
                                        @if (Model.AvoidabilityScoreID == 3)
                                        {
                                            <option selected value="3">3</option>
                                        }
                                        else
                                        {
                                            <option value="3">3</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-12">
                                <span>Comments</span>
                            </div>
                            @*<div class="col-md-4">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-12">
                                @Html.TextAreaFor(model => model.Comments, 5, 100, new { @class = "form-control" })
                            </div>
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-12">
                                <span>Feedback to NoK</span>
                            </div>
                            @*<div class="col-md-4">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                            <div class="col-md-12">
                                @Html.TextAreaFor(model => model.FeedbackToNoK, 5, 100, new { @class = "form-control" })
                            </div>
                            @*<div class="col-md-1">
                                    <div class="row_bar">
                                        &nbsp;
                                    </div>
                                </div>*@
                        </div>
                        <input type="hidden" id="hdfStage2SJRRequired" name="hdfStage2SJRRequired" value="" />
                        <input type="hidden" id="hdfMSGRequired" name="hdfMSGRequired" value="" />
                    </div>
                </div>
            </div>
            <div class="col-md-12" align="right">
                <button id="activate-step-2" type="submit" name="BtnFinish" class="btn btn-primary btn-lg">Save & Finish</button>
            </div>
        }
    </div>
</div>
<br />
<br />

<div class="modal fade" id="modelClose">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Message</h4>
                <button type="button" class="close" data-dismiss="modal">×</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <div class="form-section" style="text-align:left">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row_bar">
                                <div>Do you want to exit without saving your changes?</div>
                            </div>
                        </div>
                        <br />
                        <br />
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary btn-block" id="btnModelClose1" data-dismiss="modal" formmethod="post" onclick="location.href='@Url.Action("MortalityReview", "Home", new { id=Model.Patient_ID })'">Yes</button>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary btn-block" name="btnCloseYes" id="btnCloseYes">No</button>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#btnClose1").click(function () {
            $("#modelClose").modal();
        });
    });
    (function ($) {
        $(".datepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd/mm/yy'
        });
    })(jQuery)
</script>
<script>
        $(document).ready(function () {
            $("#btnCloseYes").click(function () {
                $("#modelClose").modal('hide');
            });
        });
</script>
<script type="text/javascript">
$(function () {
    $("#btnModelClose1").click(function () {
window.location.href = "@Url.Action("MortalityReview", "Home", new { id = Model.Patient_ID })";
    });
});
</script>
<script>
    $(document).ready(function () {
        $("input[name$='Stage2SJRRequired']").click(function () {
            var radioVal = $("input[name='Stage2SJRRequired']:checked").val();
            if (radioVal == "Yes")
            {
                $("#stage2datelabel").css("display", "block");
                $("#stage2date").css("display", "block");
                $("#stage2date").val(''); 
                $("#stage2sentlabel").css("display", "block");
                $("#stage2sent").css("display", "block");
            }
            else
            {
                $("#stage2datelabel").css("display", "none");
                $("#stage2date").css("display", "none");
                $("#stage2date").val('');
                $("#stage2sentlabel").css("display", "none");
                $("#stage2sent").css("display", "none");
            }
        });
    });
</script>
<script>
    $(document).ready(function () {
        $("input[name$='MSGRequired']").click(function () {
            var radioVal = $("input[name='MSGRequired']:checked").val();
            if (radioVal == "Yes")
            {
                $("#msglabel").css("display", "block");
                $("#msgdate").css("display", "block");
                $("#msgdate").val('');
            }
            else
            {
                $("#msglabel").css("display", "none");
                $("#msgdate").css("display", "none");
                $("#msgdate").val('');
            }
        });
    });
</script>